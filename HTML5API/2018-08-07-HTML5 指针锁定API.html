<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>HTML5 指针锁定API: Pointer Lock API # HTML5 API | 博客 @ 王晨旭的个人网站</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#08F">
	<link rel="stylesheet" href="/style/style.css">
	<link rel="stylesheet" href="/style/highlight/default.css">
	
	
	
	<script src="/script/highlight.pack.js"></script>
	<script src="/script/qrcode.min.js"></script>
	<script src="/script/script.js"></script>
	

</head>
<body>
	<header>
	<div id="open-header" onclick="this.parentNode.classList.toggle('open')"></div>
	<div id="header-bar">
		<a href="/" id="site-logo">
			<img src="/favicon.svg" />
			王晨旭的个人网站
		</a>
	</div>
	<nav>
		<ul>
			<li><a href="/">首页</a></li>
		<li><a href="/HTML5API">HTML5 API</a></li><li><a href="/server">服务器</a></li>
		</ul>


		
	</nav>
	<ul id="qrcode-links">
		<li title="微信公众号: 未来开发者(wangchenxu-net)"><a target="_blank" href="https://mp.weixin.qq.com/mp/profile_ext?action=home&amp;__biz=MzU3NjMxNDgzMw==" class="wechat-logo"></a><img src="/images/qrcode/wangchenxu-net.svg"/></li>
		<li title="码云: wangchenxu-net"><a target="_blank" href="https://gitee.com/wangchenxu-net" class="gitee-logo"></a></li>
		<li title="gitlab: wangchenxu-net"><a target="_blank" href="https://gitlab.com/wangchenxu-net" class="gitlab-logo"></a></li>
		<li title="github: wangchenxu-net"><a target="_blank" href="https://github.com/wangchenxu-net" class="github-logo"></a></li>
		<li title="捐助我：支付宝"><div class="alipay-logo"></div><img src="/images/qrcode/alipay.png"/></li>
		<li title="捐助我：微信支付"><div class="wepay-logo"></div><img src="/images/qrcode/wepay.png"/></li>
		<li title="电子邮箱"><a target="_blank" href="mailto:www@wangchenxu.net" class="email-logo"></a></li>
	</ul>
</header>
	<div>
	<div class="only-print" data-page-card data-title="HTML5 指针锁定API: Pointer Lock API"></div>
<main>
<div class="blog-info">
	<span class="blog-time">2018-08-07</span>
	<h1 class="blog-title">
		[<a href="/HTML5API">HTML5 API</a>]
	HTML5 指针锁定API: Pointer Lock API</h1>
</div>
<article class="blog-main style-context-box" need-article-nav>
	<h2 id="-">说明</h2>
<p>指针锁定(以前叫做鼠标锁定) 是一种输入方法，这种方法是基于指针的相对位移（movement），而不仅是指针的绝对位置。此API将鼠标指针锁定到特定元素上（同时将指针光标从视图中移除），并获取原始的指针位移，这样就能不受元素边界的约束而无限移动，且不会移出元素。</p><h2 id="-">语法</h2>
<p>Pointer lock API 提供两个新的方法、两个新的事件，并对对一个事件进行了扩展。</p><h3 id="requestpointerlock-">requestPointerLock 方法</h3>
<p><code>requestPointerLock</code>方法用来请求指针锁定，此方法扩展了 DOM 元素，具体语法如下：</p><pre><code class="ECMAScript">element.requestPointerLock();</code></pre>
<blockquote>
<p><em><strong>注意</strong></em> <code>requestPointerLock</code>方法可能需要添加浏览器前缀才能使用。</p></blockquote>
<h3 id="exitpointerlock-">exitPointerLock 方法</h3>
<p><code>exitPointerLock</code>方法用来推出指针锁定，此方法扩展了<code>document</code>对象，具体语法如下：</p><pre><code class="ECMAScript">document.exitPointerLock();</code></pre>
<blockquote>
<p><em><strong>注意</strong></em> <code>exitPointerLock</code>方法可能需要添加浏览器前缀才能使用。</p></blockquote>
<h3 id="pointerlockchange-">pointerlockchange 事件</h3>
<p>当指针锁定状态改变时（如：调用 <code>requestPointerLock</code>、<code>exitPointerLock</code>，用户按下 ESC 键），<code>pointerlockchange</code> 事件被分发到 <code>document</code>。 这是一个简单事件，不包含任何的额外数据。</p><blockquote>
<p><em><strong>注意</strong></em> <code>pointerlockchange</code> 事件可能需要添加浏览器前缀才能使用。</p></blockquote>
<h3 id="pointerlockerror-">pointerlockerror 事件</h3>
<p>当调用 <code>requestPointerLock</code> 或 <code>exitPointerLock</code>而引发错误时，<code>pointerlockerror</code> 事件被分发到 <code>document</code>。 这是一个简单事件，不包含任何的额外数据。</p><blockquote>
<p><em><strong>注意</strong></em> <code>pointerlockerror</code> 事件可能需要添加浏览器前缀才能使用。</p></blockquote>
<h3 id="movement-">movement 事件的扩展</h3>
<p>Pointer lock API 对<code>MouseEvent</code>事件增加了 movement 属性：</p><pre><code class="C">partial interface MouseEvent {
    readonly attribute long movementX;
    readonly attribute long movementY;
};</code></pre>
<blockquote>
<p><em><strong>注意</strong></em> movement 属性可能需要添加浏览器前缀才能使用。</p></blockquote>
<h2 id="-">其他注意事项</h2>
<p>只有网页处于全屏状态下，指针锁定才会成功，当退出全屏后，指针锁定也会自动退出。</p>
</article>
<div class="style-context-box not-print" data-clipboard-tip="此文链接:" data-clipboard-data data-clipboard-type="url"></div>
<div class="base-page-nav">
	
		<a href="/HTML5API/2018-09-04-HTML5 协议处理.html" title="HTML5 协议处理: Web-based Protocol Handlers">上一篇：HTML5 协议处理: Web-based Protocol Handlers</a>
	
	
		<div>已经是最后一篇</div>
	
</div>
<div class="only-print" data-page-card data-title="HTML5 指针锁定API: Pointer Lock API"></div>
<div class="not-print" id="cyReward" role="cylabs" data-use="reward"></div>
<div class="not-print" id="cyEmoji" role="cylabs" data-use="emoji"></div>
<div class="not-print" id="SOHUCS"></div>
</main>
<div class="not-print" id="more-list"></div>

</div>
	<footer>
	<div>
		&copy;2018- 2019
		<a href="//www.wangchenxu.net">王晨旭的网站</a>
		<script src="//s19.cnzz.com/stat.php?id=1274150741&show=pic"></script>
	</div>
</footer>
</body>
</html>
